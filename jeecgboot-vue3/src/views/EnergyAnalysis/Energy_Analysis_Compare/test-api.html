<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>能源分析对比API测试</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .test-button { padding: 8px 16px; margin: 5px; background: #1890ff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .test-button:hover { background: #40a9ff; }
        .result-box { margin-top: 10px; padding: 10px; background: #f5f5f5; border-radius: 4px; white-space: pre-wrap; font-family: monospace; max-height: 300px; overflow-y: auto; }
        .params-box { margin-top: 10px; padding: 10px; background: #e6f7ff; border-radius: 4px; white-space: pre-wrap; font-family: monospace; }
    </style>
</head>
<body>
    <h1>能源分析对比API测试</h1>
    
    <div class="test-section">
        <h3>1. 根据维度获取仪表列表</h3>
        <button class="test-button" onclick="testGetModulesByDimension()">测试获取仪表列表</button>
        <div class="params-box" id="modules-params">
请求参数：
{
  "orgCode": "A02A02A01",
  "energyType": 1,
  "includeChildren": false
}
        </div>
        <div class="result-box" id="modules-result">点击按钮测试API...</div>
    </div>

    <div class="test-section">
        <h3>2. 获取能源分析对比数据</h3>
        <button class="test-button" onclick="testGetCompareData()">测试获取对比数据</button>
        <div class="params-box" id="compare-params">
请求参数：
{
  "moduleId": "yj0001_1202",
  "timeType": "day",
  "startTime": "2025-07-26",
  "endTime": "2025-08-02",
  "compareType": "compare"
}
        </div>
        <div class="result-box" id="compare-result">点击按钮测试API...</div>
    </div>

    <div class="test-section">
        <h3>3. 获取能源类型配置</h3>
        <button class="test-button" onclick="testGetEnergyTypes()">测试获取能源类型</button>
        <div class="params-box" id="energy-types-params">
请求参数：无
        </div>
        <div class="result-box" id="energy-types-result">点击按钮测试API...</div>
    </div>

    <script>
        // 基础URL配置
        const baseURL = '/jeecg-boot';
        
        // 通用请求函数
        async function apiRequest(url, method = 'GET', data = null) {
            const options = {
                method: method,
                headers: {
                    'Content-Type': 'application/json',
                    // 这里需要添加认证头，根据实际情况调整
                    // 'X-Access-Token': 'your-token-here'
                }
            };
            
            if (data && method !== 'GET') {
                options.body = JSON.stringify(data);
            }
            
            if (data && method === 'GET') {
                const params = new URLSearchParams(data);
                url += '?' + params.toString();
            }
            
            try {
                const response = await fetch(baseURL + url, options);
                const result = await response.json();
                return result;
            } catch (error) {
                return { error: error.message };
            }
        }

        // 测试获取仪表列表
        async function testGetModulesByDimension() {
            const params = {
                orgCode: 'A02A02A01',
                energyType: 1,
                includeChildren: false
            };
            
            const result = await apiRequest('/energy/analysis/getModulesByDimension', 'GET', params);
            document.getElementById('modules-result').textContent = JSON.stringify(result, null, 2);
        }

        // 测试获取对比数据
        async function testGetCompareData() {
            const data = {
                moduleId: 'yj0001_1202',
                timeType: 'day',
                startTime: '2025-07-26',
                endTime: '2025-08-02',
                compareType: 'compare'
            };
            
            const result = await apiRequest('/energy/analysis/getCompareData', 'POST', data);
            document.getElementById('compare-result').textContent = JSON.stringify(result, null, 2);
        }

        // 测试获取能源类型
        async function testGetEnergyTypes() {
            const result = await apiRequest('/energy/analysis/getEnergyTypes', 'GET');
            document.getElementById('energy-types-result').textContent = JSON.stringify(result, null, 2);
        }

        // 页面加载完成后的提示
        window.onload = function() {
            console.log('能源分析对比API测试页面已加载');
            console.log('请确保后端服务已启动，并且API接口已实现');
        };
    </script>
</body>
</html>
