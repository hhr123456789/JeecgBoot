# èƒ½æºåˆ†æå¯¹æ¯”åŠŸèƒ½éªŒè¯æ¸…å•

## âœ… ç¼–è¯‘çŠ¶æ€æ£€æŸ¥

### å·²éªŒè¯æ— ç¼–è¯‘é”™è¯¯çš„æ–‡ä»¶ï¼š
- âœ… `EnergyAnalysisController.java` - æ§åˆ¶å™¨
- âœ… `EnergyAnalysisServiceImpl.java` - æœåŠ¡å®ç°ç±»
- âœ… `IEnergyAnalysisService.java` - æœåŠ¡æ¥å£
- âœ… `TbModuleMapper.java` - Mapperæ¥å£
- âœ… `ModuleVO.java` - ä»ªè¡¨ä¿¡æ¯VO
- âœ… `CompareDataRequest.java` - æŸ¥è¯¢è¯·æ±‚VO
- âœ… `CompareDataVO.java` - å“åº”æ•°æ®VO
- âœ… `EnergyTypeVO.java` - èƒ½æºç±»å‹VO

### å·²åˆ›å»ºçš„XMLé…ç½®ï¼š
- âœ… `TbModuleMapper.xml` - æ‰©å±•äº†SQLæŸ¥è¯¢

## ğŸš€ åŠŸèƒ½éªŒè¯æ­¥éª¤

### 1. å¯åŠ¨åº”ç”¨
```bash
cd jeecg-boot
mvn spring-boot:run
```

### 2. å¥åº·æ£€æŸ¥
```bash
curl http://localhost:8080/jeecg-boot/energy/analysis/health
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "success": true,
  "message": "æ“ä½œæˆåŠŸ",
  "code": 200,
  "result": "èƒ½æºåˆ†ææœåŠ¡è¿è¡Œæ­£å¸¸"
}
```

### 3. è·å–èƒ½æºç±»å‹é…ç½®
```bash
curl http://localhost:8080/jeecg-boot/energy/analysis/getEnergyTypes
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "success": true,
  "code": 200,
  "result": [
    {
      "energyType": 1,
      "energyTypeName": "ç”µ",
      "unit": "kWh",
      "icon": "electric"
    },
    {
      "energyType": 2,
      "energyTypeName": "æ°´",
      "unit": "mÂ³",
      "icon": "water"
    },
    {
      "energyType": 3,
      "energyTypeName": "æ°”",
      "unit": "mÂ³",
      "icon": "gas"
    }
  ]
}
```

### 4. è·å–æ³¨å¡‘éƒ¨é—¨ä»ªè¡¨åˆ—è¡¨
```bash
curl "http://localhost:8080/jeecg-boot/energy/analysis/getModulesByDimension?orgCode=A02A02A01&energyType=1"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "success": true,
  "code": 200,
  "result": [
    {
      "moduleId": "yj0001_1202",
      "moduleName": "1å·æ³¨å¡‘æœº",
      "energyType": 1,
      "energyTypeName": "ç”µ",
      "unit": "kWh",
      "dimensionName": "æ³¨å¡‘éƒ¨é—¨",
      "dimensionId": "1881235917079482369",
      "gatewayCode": "yj0001_1",
      "meterId": "202",
      "ratedPower": 1000.00
    },
    {
      "moduleId": "yj0001_12",
      "moduleName": "2å·æ³¨å¡‘æœº",
      "energyType": 1,
      "energyTypeName": "ç”µ",
      "unit": "kWh",
      "dimensionName": "æ³¨å¡‘éƒ¨é—¨",
      "dimensionId": "1940618841356288002",
      "gatewayCode": "yj0001_1",
      "meterId": "2",
      "ratedPower": 1000.00
    }
  ]
}
```

### 5. æŸ¥è¯¢1å·æ³¨å¡‘æœºæ—¥å¯¹æ¯”æ•°æ®
```bash
curl -X POST "http://localhost:8080/jeecg-boot/energy/analysis/getCompareData" \
     -H "Content-Type: application/json" \
     -d '{
       "moduleId": "yj0001_1202",
       "timeType": "day",
       "startTime": "2025-07-26",
       "endTime": "2025-08-02",
       "compareType": "compare"
     }'
```

**é¢„æœŸå“åº”ç»“æ„**ï¼š
```json
{
  "success": true,
  "code": 200,
  "result": {
    "summary": {
      "totalConsumption": 296.37,
      "previousConsumption": 201.74,
      "growthRate": 31.93,
      "unit": "kWh"
    },
    "chartData": {
      "categories": ["07-26", "07-27", "07-28", "07-29", "07-30", "07-31", "08-01", "08-02"],
      "series": [
        {
          "name": "æœ¬æœŸç”¨ç”µé‡",
          "data": [289, 283, 299, 250, 240, 180, 190, 200],
          "unit": "kWh"
        },
        {
          "name": "å¯¹æ¯”ç”¨ç”µé‡",
          "data": [250, 260, 283, 220, 200, 150, 170, 180],
          "unit": "kWh"
        }
      ]
    },
    "tableData": [
      {
        "date": "07-26",
        "currentConsumption": 289,
        "previousConsumption": 250,
        "difference": 39,
        "growthRate": 15.6
      }
    ],
    "moduleInfo": {
      "moduleId": "yj0001_1202",
      "moduleName": "1å·æ³¨å¡‘æœº",
      "energyType": 1,
      "unit": "kWh",
      "dimensionName": "æ³¨å¡‘éƒ¨é—¨"
    }
  }
}
```

## ğŸ” æ•°æ®åº“éªŒè¯

### 1. æ£€æŸ¥ä»ªè¡¨æ•°æ®
```sql
-- æŸ¥çœ‹ä»ªè¡¨åŸºç¡€ä¿¡æ¯
SELECT module_id, module_name, energy_type, sys_org_code 
FROM tb_module 
WHERE isaction = 'Y' 
LIMIT 5;
```

### 2. æ£€æŸ¥ç»´åº¦æ•°æ®
```sql
-- æŸ¥çœ‹ç»´åº¦ä¿¡æ¯
SELECT id, depart_name, org_code, parent_id 
FROM sys_depart 
WHERE org_code IN ('A02A02A01', 'A02A02A04', 'A02A02A05');
```

### 3. æ£€æŸ¥ç»Ÿè®¡æ•°æ®
```sql
-- æŸ¥çœ‹æ—¥ç»Ÿè®¡æ•°æ®
SELECT module_id, dt, energy_count 
FROM tb_ep_equ_energy_daycount 
WHERE module_id = 'yj0001_1202' 
ORDER BY dt DESC 
LIMIT 5;
```

## ğŸ§ª é”™è¯¯å¤„ç†éªŒè¯

### 1. å‚æ•°ç¼ºå¤±æµ‹è¯•
```bash
curl -X POST "http://localhost:8080/jeecg-boot/energy/analysis/getCompareData" \
     -H "Content-Type: application/json" \
     -d '{
       "moduleId": "",
       "timeType": "day"
     }'
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "success": false,
  "code": 500,
  "message": "ä»ªè¡¨IDä¸èƒ½ä¸ºç©º"
}
```

### 2. é”™è¯¯æ—¶é—´ç±»å‹æµ‹è¯•
```bash
curl -X POST "http://localhost:8080/jeecg-boot/energy/analysis/getCompareData" \
     -H "Content-Type: application/json" \
     -d '{
       "moduleId": "yj0001_1202",
       "timeType": "invalid",
       "startTime": "2025-07-26",
       "endTime": "2025-08-02"
     }'
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "success": false,
  "code": 500,
  "message": "æ—¶é—´ç±»å‹åªæ”¯æŒï¼šdayã€monthã€year"
}
```

### 3. ç»´åº¦ç¼–ç ç¼ºå¤±æµ‹è¯•
```bash
curl "http://localhost:8080/jeecg-boot/energy/analysis/getModulesByDimension?orgCode="
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "success": false,
  "code": 500,
  "message": "ç»´åº¦ç¼–ç ä¸èƒ½ä¸ºç©º"
}
```

## ğŸ“Š Swaggeræ–‡æ¡£éªŒè¯

### è®¿é—®Swaggeræ–‡æ¡£
```
http://localhost:8080/jeecg-boot/doc.html
```

### éªŒè¯é¡¹ç›®ï¼š
- [ ] èƒ½æºåˆ†æå¯¹æ¯”æ¨¡å—æ˜¯å¦å‡ºç°åœ¨æ–‡æ¡£ä¸­
- [ ] æ‰€æœ‰æ¥å£æ˜¯å¦æ­£ç¡®æ˜¾ç¤º
- [ ] å‚æ•°è¯´æ˜æ˜¯å¦å®Œæ•´
- [ ] å“åº”ç¤ºä¾‹æ˜¯å¦æ­£ç¡®

## ğŸ¯ åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥

### æ ¸å¿ƒåŠŸèƒ½ï¼š
- [ ] âœ… æ ¹æ®ç»´åº¦è·å–ä»ªè¡¨åˆ—è¡¨
- [ ] âœ… æ”¯æŒå­ç»´åº¦é€’å½’æŸ¥è¯¢
- [ ] âœ… æ”¯æŒèƒ½æºç±»å‹ç­›é€‰
- [ ] âœ… æ—¥å¯¹æ¯”æ•°æ®æŸ¥è¯¢
- [ ] âœ… æœˆå¯¹æ¯”æ•°æ®æŸ¥è¯¢
- [ ] âœ… å¹´å¯¹æ¯”æ•°æ®æŸ¥è¯¢
- [ ] âœ… åŒæ¯”å¢é•¿ç‡è®¡ç®—
- [ ] âœ… èƒ½æºç±»å‹é…ç½®æŸ¥è¯¢

### æ•°æ®ç»“æ„ï¼š
- [ ] âœ… æ±‡æ€»æ•°æ®ï¼ˆæ€»æ¶ˆè€—ã€å¢é•¿ç‡ç­‰ï¼‰
- [ ] âœ… å›¾è¡¨æ•°æ®ï¼ˆæ—¶é—´è½´ã€ç³»åˆ—æ•°æ®ï¼‰
- [ ] âœ… è¡¨æ ¼æ•°æ®ï¼ˆè¯¦ç»†å¯¹æ¯”ï¼‰
- [ ] âœ… ä»ªè¡¨ä¿¡æ¯ï¼ˆåŸºæœ¬ä¿¡æ¯ï¼‰

### å¼‚å¸¸å¤„ç†ï¼š
- [ ] âœ… å‚æ•°éªŒè¯
- [ ] âœ… æ•°æ®ä¸ºç©ºå¤„ç†
- [ ] âœ… é”™è¯¯å“åº”æ ¼å¼
- [ ] âœ… æ—¥å¿—è®°å½•

## ğŸ“ éªŒè¯ç»“æœè®°å½•

### æµ‹è¯•æ—¶é—´ï¼š_____________

### æµ‹è¯•ç»“æœï¼š
- [ ] æ‰€æœ‰æ¥å£æ­£å¸¸å“åº”
- [ ] æ•°æ®æ ¼å¼æ­£ç¡®
- [ ] é”™è¯¯å¤„ç†æ­£å¸¸
- [ ] Swaggeræ–‡æ¡£å®Œæ•´
- [ ] æ•°æ®åº“æŸ¥è¯¢æ­£å¸¸

### å‘ç°çš„é—®é¢˜ï¼š
1. ________________________________
2. ________________________________
3. ________________________________

### éœ€è¦ä¿®å¤çš„é¡¹ç›®ï¼š
1. ________________________________
2. ________________________________
3. ________________________________

## ğŸ‰ éªŒè¯å®Œæˆæ ‡å¿—

å½“ä»¥ä¸‹æ‰€æœ‰é¡¹ç›®éƒ½é€šè¿‡æ—¶ï¼Œè¯´æ˜èƒ½æºåˆ†æå¯¹æ¯”åŠŸèƒ½å®ç°æˆåŠŸï¼š

- [ ] âœ… ç¼–è¯‘æ— é”™è¯¯
- [ ] âœ… å¯åŠ¨æ— å¼‚å¸¸
- [ ] âœ… å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] âœ… èƒ½æºç±»å‹é…ç½®æ­£ç¡®è¿”å›
- [ ] âœ… ä»ªè¡¨åˆ—è¡¨æŸ¥è¯¢æ­£å¸¸
- [ ] âœ… å¯¹æ¯”æ•°æ®æŸ¥è¯¢æ­£å¸¸
- [ ] âœ… é”™è¯¯å¤„ç†æ­£ç¡®
- [ ] âœ… Swaggeræ–‡æ¡£å®Œæ•´
- [ ] âœ… æ•°æ®åº“æŸ¥è¯¢æ­£å¸¸

**æ­å–œï¼èƒ½æºåˆ†æå¯¹æ¯”åŠŸèƒ½å®ç°å®Œæˆï¼** ğŸ‰
