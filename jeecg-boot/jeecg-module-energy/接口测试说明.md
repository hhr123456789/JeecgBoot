# å®æ—¶æ•°æ®ç›‘æ§æ¥å£æµ‹è¯•è¯´æ˜

## âœ… é—®é¢˜ä¿®å¤å®Œæˆ

å·²ä¿®å¤çš„é—®é¢˜ï¼š
1. âœ… å®ä½“ç±»å­—æ®µè®¿é—®æ–¹æ³•åé”™è¯¯ - å·²ä¿®æ­£ä¸ºæ­£ç¡®çš„getteræ–¹æ³•å
2. âœ… `@ApiParam` æ³¨è§£ä½ç½®é”™è¯¯ - å·²ç§»é™¤ä¸å½“ä½¿ç”¨çš„æ³¨è§£
3. âœ… `LocalDateTime.of()` æ–¹æ³•å‚æ•°é”™è¯¯ - å·²æ·»åŠ å°æ—¶å’Œåˆ†é’Ÿå‚æ•°
4. âœ… é‡å¤å˜é‡åé—®é¢˜ - å·²é‡å‘½åå˜é‡é¿å…å†²çª
5. âœ… ç±»å‹è½¬æ¢é—®é¢˜ - å·²ç¡®ä¿ç±»å‹åŒ¹é…

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. å¯åŠ¨åº”ç”¨
```bash
cd jeecg-boot
mvn spring-boot:run
```

### 2. è®¿é—®Swaggeræ–‡æ¡£
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:8080/jeecg-boot/doc.html`

åœ¨Swaggerä¸­æ‰¾åˆ° **"å®æ—¶æ•°æ®ç›‘æ§"** å’Œ **"å®æ—¶æ•°æ®ç›‘æ§æµ‹è¯•"** æ ‡ç­¾

### 3. æµ‹è¯•æ¥å£

#### 3.1 æµ‹è¯•è·å–ä»ªè¡¨åˆ—è¡¨
```
GET /energy/realtime/test/testGetModules
```
è¿™ä¸ªæ¥å£ä¼šæµ‹è¯•æ ¹æ®ç»´åº¦"A02A02A01"ï¼ˆæ³¨å¡‘éƒ¨é—¨ï¼‰è·å–ç”µåŠ›ä»ªè¡¨åˆ—è¡¨

#### 3.2 æµ‹è¯•è·å–å‚æ•°é…ç½®
```
GET /energy/realtime/test/testGetParameters
```
è¿™ä¸ªæ¥å£ä¼šè¿”å›ç”µåŠ›ç±»å‹çš„æ‰€æœ‰å¯é€‰å‚æ•°é…ç½®

#### 3.3 æµ‹è¯•æŸ¥è¯¢æ—¶åºæ•°æ®
```
GET /energy/realtime/test/testGetTimeSeriesData
```
è¿™ä¸ªæ¥å£ä¼šæ¨¡æ‹ŸæŸ¥è¯¢ä»ªè¡¨"yj0001_13"å’Œ"yj0001_14"çš„Aç›¸ç”µæµã€Bç›¸ç”µæµå’Œæ€»æœ‰åŠŸåŠŸç‡æ•°æ®

#### 3.4 æµ‹è¯•è·å–å®æ—¶çŠ¶æ€
```
GET /energy/realtime/test/testGetCurrentStatus
```
è¿™ä¸ªæ¥å£ä¼šè·å–æŒ‡å®šä»ªè¡¨çš„å®æ—¶çŠ¶æ€ä¿¡æ¯

### 4. æ­£å¼æ¥å£æµ‹è¯•

#### 4.1 è·å–ä»ªè¡¨åˆ—è¡¨
```
GET /energy/realtime/getModulesByDimension?dimensionCode=A02A02A01&energyType=1&includeChildren=true
```

#### 4.2 è·å–å‚æ•°é…ç½®
```
GET /energy/realtime/getParameterConfig?energyType=1
```

#### 4.3 æŸ¥è¯¢æ—¶åºæ•°æ®
```
POST /energy/realtime/getTimeSeriesData
Content-Type: application/json

{
    "moduleIds": ["yj0001_13", "yj0001_14"],
    "parameters": [1, 2, 7],
    "timeGranularity": "day",
    "queryDate": "2025-07-25"
}
```

#### 4.4 è·å–å®æ—¶çŠ¶æ€
```
POST /energy/realtime/getCurrentStatus
Content-Type: application/json

{
    "moduleIds": ["yj0001_13", "yj0001_14"],
    "parameters": [1, 2, 7]
}
```

## ğŸ“Š é¢„æœŸç»“æœ

### ä»ªè¡¨åˆ—è¡¨å“åº”ç¤ºä¾‹
```json
{
    "success": true,
    "message": "æŸ¥è¯¢æˆåŠŸ",
    "code": 200,
    "result": [
        {
            "moduleId": "yj0001_13",
            "moduleName": "3å·æ³¨å¡‘æœº",
            "energyType": 1,
            "dimensionCode": "1940618949271535617",
            "dimensionName": "3å·æ³¨å¡‘æœº",
            "ratedPower": 1000.0,
            "isAction": "Y",
            "updateTime": "2025-07-03 16:43:45"
        }
    ]
}
```

### å‚æ•°é…ç½®å“åº”ç¤ºä¾‹
```json
{
    "success": true,
    "message": "æŸ¥è¯¢æˆåŠŸ", 
    "code": 200,
    "result": [
        {
            "paramCode": 1,
            "paramName": "Aç›¸ç”µæµ",
            "fieldName": "IA",
            "unit": "A",
            "category": "ç”µæµ",
            "isDefault": true,
            "energyType": 1
        }
    ]
}
```

### æ—¶åºæ•°æ®å“åº”ç¤ºä¾‹
```json
{
    "success": true,
    "message": "æŸ¥è¯¢æˆåŠŸ",
    "code": 200,
    "result": {
        "chartData": {
            "timeLabels": ["00:00", "01:00", "02:00", ...],
            "series": [
                {
                    "moduleId": "yj0001_13",
                    "moduleName": "3å·æ³¨å¡‘æœº",
                    "paramCode": 1,
                    "paramName": "Aç›¸ç”µæµ",
                    "unit": "A",
                    "data": [95.2, 96.1, 94.8, ...],
                    "color": "#1890ff"
                }
            ]
        },
        "tableData": [...],
        "summary": {
            "totalDataPoints": 72,
            "timeRange": "2025-07-25 00:00:00 ~ 2025-07-25 23:59:59",
            "granularity": "æ¯å°æ—¶",
            "moduleCount": 2,
            "parameterCount": 3
        }
    }
}
```

## ğŸ”§ å‰ç«¯é›†æˆ

### Vue.jsç¤ºä¾‹
```javascript
// è·å–ä»ªè¡¨åˆ—è¡¨
async getModulesByDimension(dimensionCode) {
    try {
        const response = await this.$http.get('/energy/realtime/getModulesByDimension', {
            params: {
                dimensionCode: dimensionCode,
                energyType: 1,
                includeChildren: true
            }
        });
        
        if (response.data.success) {
            this.moduleList = response.data.result;
        }
    } catch (error) {
        console.error('è·å–ä»ªè¡¨åˆ—è¡¨å¤±è´¥:', error);
    }
}

// æŸ¥è¯¢æ—¶åºæ•°æ®
async queryTimeSeriesData() {
    try {
        const response = await this.$http.post('/energy/realtime/getTimeSeriesData', {
            moduleIds: this.selectedModuleIds,
            parameters: this.selectedParameters,
            timeGranularity: this.timeGranularity,
            queryDate: this.queryDate
        });
        
        if (response.data.success) {
            this.updateChart(response.data.result.chartData);
            this.updateTable(response.data.result.tableData);
        }
    } catch (error) {
        console.error('æŸ¥è¯¢æ—¶åºæ•°æ®å¤±è´¥:', error);
    }
}
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“è¿æ¥**ï¼šç¡®ä¿MySQLå’ŒInfluxDBè¿æ¥æ­£å¸¸
2. **æµ‹è¯•æ•°æ®**ï¼šå¦‚æœæ²¡æœ‰å®é™…æ•°æ®ï¼Œæ¥å£ä¼šè¿”å›æ¨¡æ‹Ÿæ•°æ®ç”¨äºæµ‹è¯•
3. **æ—¶åŒºå¤„ç†**ï¼šæ‰€æœ‰æ—¶é—´éƒ½ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºåŒ—äº¬æ—¶é—´æ˜¾ç¤º
4. **é”™è¯¯å¤„ç†**ï¼šæ¥å£åŒ…å«å®Œæ•´çš„å¼‚å¸¸å¤„ç†å’Œé”™è¯¯ä¿¡æ¯è¿”å›

## ğŸš€ ä¸‹ä¸€æ­¥

1. æµ‹è¯•æ‰€æœ‰æ¥å£åŠŸèƒ½æ˜¯å¦æ­£å¸¸
2. æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´æ•°æ®æ ¼å¼
3. å®Œå–„InfluxDBæ•°æ®è§£æé€»è¾‘
4. æ·»åŠ æ›´å¤šçš„å‚æ•°ç±»å‹æ”¯æŒ
5. ä¼˜åŒ–æ€§èƒ½å’Œç¼“å­˜ç­–ç•¥
